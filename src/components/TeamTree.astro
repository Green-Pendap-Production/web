---
const teamData = {
    name: "Management Team",
    members: [
        "Abdul Vaiz Vahry Iskandar",
        "Muhammad Yusuf Alfarabi",
        "Kevin Stevino Arnovan",
    ],
    children: [
        {
            name: "Producer",
            members: ["Zora Ghaziyah Wanie"],
            children: [
                {
                    name: "Programming",
                    children: [
                        { name: "Rifqi Reis Ramadhan" },
                        { name: "Abdul Vaiz Vahry Iskandar" },
                        { name: "Muhammad Yusuf Alfarabi" },
                    ],
                },
                {
                    name: "Design",
                    children: [
                        { name: "Atiqah Najla Fadhilah Rachman" },
                        { name: "Muhamad Gazril Alfarizi" },
                        { name: "Zahra Alifia Anshori" },
                        { name: "Kaysa Naura" },
                    ],
                },
                {
                    name: "Audio",
                    children: [
                        { name: "Rafi Andika" },
                        { name: "Kevin Stevino Arnovan" },
                    ],
                },
            ],
        },
    ],
};
---

<div class="team-tree-container w-full overflow-x-auto pb-12">
    <div class="tree">
        <ul>
            <li>
                <div class="node-card root-node group">
                    <span
                        class="font-heading text-xl text-gpp-primary block mb-2"
                        >{teamData.name}</span
                    >
                    {
                        teamData.members && (
                            <div class="border-t border-gpp-primary/40 pt-2 mt-2 divide-y divide-gpp-primary/20">
                                {teamData.members.map((member) => (
                                    <div class="text-sm font-medium text-gpp-text/80 py-1">
                                        {member}
                                    </div>
                                ))}
                            </div>
                        )
                    }
                </div>
                <ul>
                    {
                        teamData.children.map((producer) => (
                            <li>
                                <div class="node-card producer-node">
                                    <span class="font-heading text-lg text-gpp-accent block mb-1">
                                        {producer.name}
                                    </span>
                                    {producer.members && (
                                        <div class="border-t border-gpp-accent/40 pt-1 mt-1 divide-y divide-gpp-accent/20">
                                            {producer.members.map((member) => (
                                                <div class="text-sm font-medium text-gpp-text/80 py-1">
                                                    {member}
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                                <ul>
                                    {producer.children.map((dept) => (
                                        <li>
                                            <div class="node-card dept-node">
                                                <span class="font-heading text-lg text-gpp-primary block mb-3">
                                                    {dept.name}
                                                </span>
                                                {dept.children && (
                                                    <div class="flex flex-col gap-1 border-t border-gpp-primary/40 pt-2 divide-y divide-gpp-primary/20">
                                                        {dept.children.map(
                                                            (member) => (
                                                                <div class="text-sm font-medium text-gpp-text/80 py-1">
                                                                    {
                                                                        member.name
                                                                    }
                                                                </div>
                                                            ),
                                                        )}
                                                    </div>
                                                )}
                                            </div>
                                        </li>
                                    ))}
                                </ul>
                            </li>
                        ))
                    }
                </ul>
            </li>
        </ul>

        <style>
            /* 
    * CSS Tree Diagram Style
    */

            .tree {
                width: fit-content;
                margin: 0 auto;
            }

            .tree ul {
                padding-top: 20px;
                position: relative;
                transition: all 0.5s;
                display: flex;
                justify-content: center;
            }

            .tree li {
                float: left;
                text-align: center;
                list-style-type: none;
                position: relative;
                padding: 20px 5px 0 5px;
                transition: all 0.5s;
            }

            /* Connections */
            .tree li::before,
            .tree li::after {
                content: "";
                position: absolute;
                top: 0;
                right: 50%;
                border-top: 2px solid rgba(var(--color-gpp-text), 0.8);
                width: 50%;
                height: 20px;
            }

            .tree li::after {
                right: auto;
                left: 50%;
                border-left: 2px solid rgba(var(--color-gpp-text), 0.8);
            }

            .tree li:only-child::after,
            .tree li:only-child::before {
                display: none;
            }

            .tree li:only-child {
                padding-top: 0;
            }

            .tree li:first-child::before,
            .tree li:last-child::after {
                border: 0 none;
            }

            .tree li:last-child::before {
                border-right: 2px solid rgba(var(--color-gpp-text), 0.8);
                border-radius: 0 5px 0 0;
            }

            .tree li:first-child::after {
                border-radius: 5px 0 0 0;
            }

            .tree ul ul::before {
                content: "";
                position: absolute;
                top: 0;
                left: 50%;
                border-left: 2px solid rgba(var(--color-gpp-text), 0.8);
                width: 0;
                height: 20px;
            }

            /* Node Card Styling */
            .node-card {
                padding: 12px 16px;
                text-decoration: none;
                color: #666;
                display: inline-block;
                border-radius: 12px;
                transition: all 0.3s;
                background: rgba(255, 255, 255, 0.5);
                backdrop-filter: blur(4px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
                min-width: 120px;
            }

            .node-card:hover {
                background: white;
                border-color: rgba(var(--color-gpp-primary), 0.3);
                transform: translateY(-2px);
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
                z-index: 10;
            }

            .root-node {
                background: rgba(var(--color-gpp-primary), 0.1);
                border-color: rgba(var(--color-gpp-primary), 0.2);
                min-width: 250px;
            }

            .producer-node {
                background: rgba(var(--color-gpp-accent), 0.1);
                border-color: rgba(var(--color-gpp-accent), 0.2);
                min-width: 200px;
            }

            .dept-node {
                background: rgba(255, 255, 255, 0.8);
                border-color: rgba(var(--color-gpp-primary), 0.1);
                font-weight: bold;
            }

            /* Mobile Responsive */
            @media (max-width: 768px) {
                .tree ul {
                    display: flex;
                    flex-direction: column;
                    padding-top: 0;
                    padding-left: 20px;
                    align-items: flex-start;
                }

                .tree li {
                    padding: 10px 0;
                    text-align: left;
                    width: 100%;
                }

                .tree li::before,
                .tree li::after,
                .tree ul ul::before {
                    display: none;
                }

                .tree ul ul {
                    border-left: 2px solid rgba(var(--color-gpp-text), 0.1);
                    margin-left: 10px;
                }

                .tree ul ul li::before {
                    content: "";
                    display: block;
                    position: absolute;
                    top: 25px;
                    left: -20px;
                    width: 20px;
                    border-top: 2px solid rgba(var(--color-gpp-text), 0.1);
                }

                .node-card {
                    width: 100%;
                    text-align: left;
                    min-width: auto;
                }
            }
        </style>
    </div>
</div>
